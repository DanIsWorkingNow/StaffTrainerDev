import{k as P,r as N,j as e,c as $,a as A}from"./main-0TgHznNF.js";const E=A("1a64325f822d5457624f946de9d6534896a6e5418072e7565c3e34f2424cce3f"),W=$({method:"POST"}).handler(E),M=["Physical Fitness Training","Combat Drills","Agility Exercises","Endurance Training","Strength Conditioning","Flexibility Sessions","Safety Equipment Inspection","Emergency Response Drill","Team Building Workshop"],_=["5:00 PM - 6:00 PM","6:00 PM - 7:00 PM"];function R(){const{trainers:l,trainingSessions:c,stats:d}=P.useLoaderData(),[r,s]=N.useState(new Date),[a,g]=N.useState(null),[h,m]=N.useState(!1),[o,t]=N.useState("month"),[x,j]=N.useState("all"),y=(n,i,w)=>{const v=i??r.getMonth(),u=`${w??r.getFullYear()}-${String(v+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`;return c.filter(f=>f.date===u)},p=()=>{const n=new Date;return y(n.getDate(),n.getMonth(),n.getFullYear())},T=()=>{const n=new Date(r),i=n.getDay(),w=n.getDate()-i+(i===0?-6:1);n.setDate(w);const v=[];for(let D=0;D<7;D++){const u=new Date(n);u.setDate(n.getDate()+D);const f=y(u.getDate(),u.getMonth(),u.getFullYear());v.push(...f.map(b=>({...b,displayDate:u})))}return v},k=()=>x==="all"?c:c.filter(n=>n.in_charge===x||n.participants.some(i=>l.find(v=>v.id===i)?.name===x)),C=n=>{const i=new Date(r.getFullYear(),r.getMonth(),n);g(i),m(!0)},F=()=>{const n=r.getFullYear(),i=r.getMonth(),w=new Date(n,i,1),D=new Date(n,i+1,0).getDate(),u=w.getDay(),f=[];for(let b=0;b<u;b++)f.push(null);for(let b=1;b<=D;b++)f.push(b);return f};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Physical Training Schedule"}),e.jsx("p",{className:"text-gray-600",children:"Schedule after-hours physical activities (5:00 PM - 7:00 PM)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(S,{title:"Active Trainers",value:d.activeTrainers,icon:"ðŸ’ª",color:"bg-orange-500"}),e.jsx(S,{title:"Today's Sessions",value:d.todaySessions,icon:"ðŸ“…",color:"bg-green-500"}),e.jsx(S,{title:"This Week",value:d.thisWeekSessions,icon:"ðŸ“Š",color:"bg-purple-500"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const n=new Date(r);n.setMonth(r.getMonth()-1),s(n)},className:"p-2 hover:bg-gray-100 rounded-lg transition",children:"â—€ Previous"}),e.jsx("h2",{className:"text-2xl font-bold",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>{const n=new Date(r);n.setMonth(r.getMonth()+1),s(n)},className:"p-2 hover:bg-gray-100 rounded-lg transition",children:"Next â–¶"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>t("week"),className:`px-4 py-2 rounded transition ${o==="week"?"bg-orange-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>t("month"),className:`px-4 py-2 rounded transition ${o==="month"?"bg-orange-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Month"}),e.jsx("button",{onClick:()=>t("trainer-schedule"),className:`px-4 py-2 rounded transition ${o==="trainer-schedule"?"bg-orange-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Trainer Schedule"})]})]})}),o==="month"&&e.jsx(Y,{getDaysInMonth:F,getTrainingsForDate:y,handleDateClick:C,currentDate:r}),o==="week"&&e.jsx(I,{trainingSessions:T(),currentDate:r,trainers:l}),o==="trainer-schedule"&&e.jsx(q,{trainers:l,trainingSessions:k(),selectedTrainer:x,setSelectedTrainer:j,currentDate:r}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:o==="week"?"This Week's Training Events":o==="trainer-schedule"?"Trainer's Training Events":"Today's Training Events"}),(()=>{const n=o==="week"?T():o==="trainer-schedule"?k():p();return n.length===0?e.jsx("p",{className:"text-gray-600",children:"No training scheduled"}):e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsx("div",{className:"border-l-4 border-orange-500 bg-orange-50 p-4 rounded hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:i.training_type}),i.displayDate&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Date:"})," ",i.displayDate.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"In Charge:"})," ",i.in_charge]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Participants:"})," ",i.participants.length," trainer(s)"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Time:"})," ",i.time_slot]})]}),e.jsx("div",{className:"text-xs bg-orange-200 text-orange-800 px-3 py-1 rounded-full",children:"ðŸ’ª Physical"})]})},i.id))})})()]}),h&&a&&e.jsx(L,{date:a,trainers:l,onClose:()=>m(!1),onSubmit:W})]})}function S({title:l,value:c,icon:d,color:r}){return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:l}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c})]}),e.jsx("div",{className:`${r} text-white p-4 rounded-lg text-2xl`,children:d})]})})}function Y({getDaysInMonth:l,getTrainingsForDate:c,handleDateClick:d,currentDate:r}){return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center font-semibold text-gray-700 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:l().map((s,a)=>{if(!s)return e.jsx("div",{className:"aspect-square"},`empty-${a}`);const g=c(s),h=s===new Date().getDate()&&r.getMonth()===new Date().getMonth()&&r.getFullYear()===new Date().getFullYear();return e.jsxs("div",{onClick:()=>d(s),className:`
                aspect-square border-2 rounded-lg p-2 cursor-pointer transition-all
                hover:shadow-lg hover:border-orange-500 hover:scale-105
                ${h?"border-orange-600 bg-orange-50":"border-gray-200 bg-white"}
              `,children:[e.jsx("div",{className:`font-semibold mb-1 ${h?"text-orange-600":"text-gray-900"}`,children:s}),e.jsxs("div",{className:"space-y-1",children:[g.slice(0,2).map((m,o)=>e.jsxs("div",{className:"bg-orange-100 text-orange-800 text-xs p-1 rounded truncate",title:m.training_type,children:["ðŸ’ª ",m.training_type.substring(0,8),"..."]},o)),g.length>2&&e.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:["+",g.length-2," more"]})]})]},s)})})]})}function I({trainingSessions:l,currentDate:c,trainers:d}){const r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s=new Date(c),a=s.getDay(),g=s.getDate()-a+(a===0?-6:1);s.setDate(g);const h=Array.from({length:7},(m,o)=>{const t=new Date(s);return t.setDate(s.getDate()+o),t});return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsx("div",{className:"grid grid-cols-7 gap-2",children:r.map((m,o)=>{const t=h[o],x=t.toISOString().split("T")[0],j=l.filter(p=>p.date===x),y=t.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`text-center p-3 rounded-lg ${y?"bg-orange-50":""}`,children:[e.jsx("div",{className:`font-semibold ${y?"text-orange-600":"text-gray-700"}`,children:m}),e.jsx("div",{className:`text-2xl font-bold mt-2 ${y?"text-orange-600":"text-gray-900"}`,children:t.getDate()}),e.jsxs("div",{className:"mt-4 space-y-2",children:[j.map(p=>e.jsxs("div",{className:"bg-orange-100 text-orange-800 text-xs p-2 rounded border-l-4 border-orange-500",children:[e.jsx("div",{className:"font-semibold truncate",children:p.training_type}),e.jsx("div",{className:"text-xs mt-1",children:p.time_slot}),e.jsxs("div",{className:"text-xs",children:["ðŸ‘¤ ",p.in_charge]})]},p.id)),j.length===0&&e.jsx("div",{className:"text-xs text-gray-400 italic",children:"No training"})]})]},m)})})})}function q({trainers:l,trainingSessions:c,selectedTrainer:d,setSelectedTrainer:r,currentDate:s}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Trainer"}),e.jsxs("select",{value:d,onChange:a=>r(a.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"all",children:"All Trainers"}),l.map(a=>e.jsxs("option",{value:a.name,children:[a.rank," ",a.name]},a.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:c.length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:c.filter(a=>{const g=new Date(a.date);return g.getMonth()===s.getMonth()&&g.getFullYear()===s.getFullYear()}).length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"As Lead Trainer"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:c.filter(a=>a.in_charge===d).length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Trainers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(a=>{const g=c.filter(h=>h.in_charge===a.name||h.participants.includes(a.id));return e.jsx("div",{className:`p-4 rounded-lg border-2 transition cursor-pointer ${d===a.name?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,onClick:()=>r(a.name),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 text-orange-800 w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold",children:a.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("div",{className:"text-sm text-gray-600",children:a.rank}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[g.length," session(s)"]})]})]})},a.id)})})]})]})}function L({date:l,trainers:c,onClose:d,onSubmit:r}){const[s,a]=N.useState({training_type:M[0],in_charge:c[0]?.name||"",participants:[],time_slot:_[0]}),[g,h]=N.useState(!1),m=async t=>{t.preventDefault(),h(!0);const x=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`;(await r({data:{date:x,...s}})).success&&window.location.reload(),h(!1)},o=t=>{a(x=>({...x,participants:x.participants.includes(t)?x.participants.filter(j=>j!==t):[...x.participants,t]}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:d}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50 pointer-events-none",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto pointer-events-auto",children:[e.jsxs("div",{className:"bg-green-50 border-b px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Assign Physical Training"}),e.jsx("button",{onClick:d,className:"text-gray-600 hover:text-gray-900 text-2xl leading-none",type:"button",children:"Ã—"})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"text",value:l.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),readOnly:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Training Type *"}),e.jsx("select",{required:!0,value:s.training_type,onChange:t=>a({...s,training_type:t.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:M.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Time Slot *"}),e.jsx("select",{required:!0,value:s.time_slot,onChange:t=>a({...s,time_slot:t.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:_.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Trainer in Charge *"}),e.jsx("select",{required:!0,value:s.in_charge,onChange:t=>a({...s,in_charge:t.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:c.map(t=>e.jsxs("option",{value:t.name,children:[t.rank," ",t.name]},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Participating Trainers *"}),e.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:c.map(t=>e.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.participants.includes(t.id),onChange:()=>o(t.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:t.rank})," ",t.name]})]},t.id))}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",s.participants.length," trainer(s)"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||s.participants.length===0,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Assigning...":"Assign Training"})]})]})]})})]})}export{R as component};
