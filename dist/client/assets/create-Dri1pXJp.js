import{o as w,p as C,r as m,j as e,c as k,a as E}from"./main-0TgHznNF.js";const S=E("b62f62887fffaa317bb91ce939605c2c7ea8f330e29418e20f80b30eea992563"),_=k({method:"POST"}).handler(S),r=[{name:"Physical Training",color:"#3b82f6"},{name:"Safety Training",color:"#8b5cf6"},{name:"Emergency Response",color:"#ef4444"},{name:"Equipment Inspection",color:"#f59e0b"},{name:"Leadership Training",color:"#eab308"},{name:"Team Building",color:"#10b981"},{name:"Religious Activity",color:"#14b8a6"},{name:"Community Service",color:"#06b6d4"},{name:"Routine Maintenance",color:"#92400e"},{name:"Special Event",color:"#ec4899"},{name:"Development Program",color:"#6366f1"},{name:"Collaboration Activity",color:"#a855f7"}],h=[{name:"Blue",value:"#3b82f6"},{name:"Purple",value:"#8b5cf6"},{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f59e0b"},{name:"Yellow",value:"#eab308"},{name:"Green",value:"#10b981"},{name:"Teal",value:"#14b8a6"},{name:"Cyan",value:"#06b6d4"},{name:"Brown",value:"#92400e"},{name:"Pink",value:"#ec4899"},{name:"Indigo",value:"#6366f1"},{name:"Violet",value:"#a855f7"},{name:"Emerald",value:"#059669"},{name:"Lime",value:"#84cc16"},{name:"Rose",value:"#f43f5e"},{name:"Sky",value:"#0ea5e9"}];function D(){const u=w(),{trainers:n}=C.useLoaderData(),[s,l]=m.useState({name:"",category:r[0].name,start_date:"",end_date:"",description:"",color:r[0].color,trainer_ids:[]}),[x,o]=m.useState(!1),[b,d]=m.useState(""),v=a=>{const t=r.find(c=>c.name===a);l({...s,category:a,color:t?.color||r[0].color})},f=a=>{l({...s,color:a})},g=a=>{l(t=>({...t,trainer_ids:t.trainer_ids.includes(a)?t.trainer_ids.filter(c=>c!==a):[...t.trainer_ids,a]}))},p=()=>{l(a=>({...a,trainer_ids:n.map(t=>t.id)}))},j=()=>{l(a=>({...a,trainer_ids:[]}))},y=()=>n.filter(a=>s.trainer_ids.includes(a.id)),N=async a=>{a.preventDefault(),d(""),o(!0);try{if(new Date(s.end_date)<new Date(s.start_date)){d("End date must be after start date"),o(!1);return}const t=await _({data:s});if(t.error){d(t.error),o(!1);return}u({to:"/events"})}catch(t){d(t.message||"Failed to create event"),o(!1)}},i=y();return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Event"}),e.jsx("p",{className:"text-gray-600",children:"Fill in the details to create a training event and assign trainers"})]}),e.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Event Name *"}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:a=>l({...s,name:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter event name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category *"}),e.jsx("select",{required:!0,value:s.category,onChange:a=>v(a.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:r.map(a=>e.jsx("option",{value:a.name,children:a.name},a.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Event Color *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg border",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Selected Color:"}),e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-300 shadow-sm",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:h.find(a=>a.value===s.color)?.name||"Custom"})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Choose a color for your event:"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:h.map(a=>e.jsx("button",{type:"button",onClick:()=>f(a.value),className:`w-10 h-10 rounded-lg transition-all hover:scale-110 ${s.color===a.value?"ring-2 ring-offset-2 ring-gray-900 shadow-lg":"hover:shadow-md"}`,style:{backgroundColor:a.value},title:a.name},a.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:s.start_date,onChange:a=>l({...s,start_date:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"End Date *"}),e.jsx("input",{type:"date",required:!0,value:s.end_date,onChange:a=>l({...s,end_date:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:a=>l({...s,description:a.target.value}),rows:4,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter event description (optional)"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Assign Trainers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:p,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Select All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{type:"button",onClick:j,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Deselect All"})]})]}),i.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsxs("h3",{className:"font-semibold text-blue-900",children:["Selected Trainers (",i.length,")"]})]})}),e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsxs("div",{className:"flex items-center justify-between bg-white px-3 py-2 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-blue-700",children:a.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:a.name}),e.jsx("p",{className:"text-xs text-gray-600",children:a.specialization||a.rank})]})]}),e.jsx("button",{type:"button",onClick:()=>g(a.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},a.id))})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Select trainers who will be assigned to this event",s.trainer_ids.length===0&&" (none selected)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-80 overflow-y-auto",children:n.map(a=>e.jsxs("label",{className:`flex items-center space-x-3 p-3 rounded-lg border-2 cursor-pointer transition ${s.trainer_ids.includes(a.id)?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:s.trainer_ids.includes(a.id),onChange:()=>g(a.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:a.name}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:a.specialization||a.rank})]})]},a.id))}),n.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No active trainers available"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 rounded-b-lg",children:[e.jsx("button",{type:"button",onClick:()=>u({to:"/events"}),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Creating...":"Create Event"})]})]})]})}export{D as component};
