import{f as D,r as w,j as e}from"./main-0TgHznNF.js";function M(){const{events:g,trainers:x,schedules:d,stats:o}=D.useLoaderData(),[r,p]=w.useState(new Date),[h,b]=w.useState("week");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Training Schedule"}),e.jsx("p",{className:"text-gray-600",children:"Manage and view all training schedules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(N,{title:"Active Trainers",value:o.activeTrainers,icon:"ðŸ‘¥",color:"bg-blue-500"}),e.jsx(N,{title:"Today's Sessions",value:o.todaySessions,icon:"ðŸ“…",color:"bg-green-500"}),e.jsx(N,{title:"This Week",value:o.thisWeekSessions,icon:"ðŸ“Š",color:"bg-purple-500"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const l=new Date(r);l.setMonth(r.getMonth()-1),p(l)},className:"p-2 hover:bg-gray-100 rounded",children:"â—€"}),e.jsx("h2",{className:"text-xl font-semibold",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>{const l=new Date(r);l.setMonth(r.getMonth()+1),p(l)},className:"p-2 hover:bg-gray-100 rounded",children:"â–¶"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b("week"),className:`px-4 py-2 rounded ${h==="week"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>b("month"),className:`px-4 py-2 rounded ${h==="month"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Month"}),e.jsx("button",{onClick:()=>b("trainer-schedule"),className:`px-4 py-2 rounded ${h==="trainer-schedule"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Trainer Schedule"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:h==="week"?e.jsx(T,{schedules:d,events:g,currentDate:r}):h==="month"?e.jsx(C,{schedules:d,events:g,currentDate:r}):e.jsx(k,{trainers:x,schedules:d,events:g,currentDate:r})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Active Trainers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(l=>e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ‘¤"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.name}),e.jsx("p",{className:"text-sm text-gray-600",children:l.rank}),l.specialization&&e.jsx("p",{className:"text-xs text-gray-500",children:l.specialization})]})]})},l.id))})]})]})}function N({title:g,value:x,icon:d,color:o}){return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:g}),e.jsx("p",{className:"text-3xl font-bold",children:x})]}),e.jsx("div",{className:`${o} w-16 h-16 rounded-full flex items-center justify-center text-3xl`,children:d})]})})}function k({trainers:g,schedules:x,events:d,currentDate:o}){const r=new Date(o.getFullYear(),o.getMonth(),1),h=new Date(o.getFullYear(),o.getMonth()+1,0).getDate(),b=Array.from({length:h},(t,s)=>{const c=new Date(r);return c.setDate(r.getDate()+s),c}),l=(t,s)=>{const c=s.toISOString().split("T")[0],m=t.start_date,n=t.end_date;return c>=m&&c<=n},u=t=>d.filter(s=>l(s,t)),a=(t,s)=>{const c=s.toISOString().split("T")[0];return x.find(m=>m.trainer_id===t&&m.date===c)},i=t=>!t||t.length===0?"":t.join(", "),y=t=>{switch(t?.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800 border-blue-300";case"in progress":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"completed":return"bg-green-100 text-green-800 border-green-300";case"cancelled":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},f=t=>x.filter(s=>s.trainer_id===t&&s.status!=="cancelled").length;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"inline-block min-w-full",children:[e.jsx("div",{className:"bg-gray-50 border-b sticky top-0 z-20",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-56 p-3 font-semibold border-r sticky left-0 bg-gray-50 z-30",children:[e.jsx("div",{children:"Trainer"}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),b.map((t,s)=>{const c=t.toDateString()===new Date().toDateString(),m=u(t);return e.jsxs("div",{className:`min-w-[100px] p-2 text-center border-r ${c?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-semibold text-xs",children:t.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-sm mt-1 ${c?"text-blue-600 font-bold":"text-gray-600"}`,children:t.getDate()}),m.length>0&&e.jsx("div",{className:"mt-1",children:m.map(n=>e.jsx("div",{className:"w-2 h-2 rounded-full mx-auto",style:{backgroundColor:n.color||"#3b82f6"},title:n.name},n.id))})]},s)})]})}),e.jsx("div",{children:g.map(t=>{const s=f(t.id);return e.jsxs("div",{className:"flex border-b hover:bg-gray-50",children:[e.jsxs("div",{className:"w-56 p-3 border-r sticky left-0 bg-white z-10",children:[e.jsx("div",{className:"font-semibold text-sm",children:t.name}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.specialization||t.rank}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:t.status}),s>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[s," days"]})]})]}),b.map((c,m)=>{const n=a(t.id,c),v=u(c),S=c.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`min-w-[100px] p-2 border-r ${S?"bg-blue-50/30":""}`,children:[v.length>0&&e.jsx("div",{className:"space-y-1 mb-2",children:v.map(j=>e.jsxs("div",{className:"text-xs p-1.5 rounded border-l-4",style:{borderLeftColor:j.color||"#3b82f6",backgroundColor:j.color?`${j.color}15`:"#eff6ff"},title:`${j.name} - ${j.category||"Training"}`,children:[e.jsx("div",{className:"font-semibold truncate text-gray-800",children:j.name}),j.category&&e.jsx("div",{className:"text-xs text-gray-600 truncate",children:j.category})]},j.id))}),n?e.jsxs("div",{className:`text-xs p-2 rounded border ${y(n.status)}`,children:[e.jsx("div",{className:"font-bold text-center mb-1",children:n.status?.toUpperCase()}),n.availability&&n.availability.length>0&&e.jsxs("div",{className:"text-xs text-center mt-1",children:["ðŸ• ",i(n.availability)]}),n.notes&&e.jsxs("div",{className:"text-xs text-center mt-1 truncate",title:n.notes,children:["ðŸ“ ",n.notes]})]}):e.jsx("div",{className:"text-center text-gray-300 text-xs py-2",children:"â€”"})]},m)})]},t.id)})}),e.jsx("div",{className:"bg-gray-50 border-t",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-56 p-3 font-semibold border-r sticky left-0 bg-gray-50",children:"Total Active"}),b.map((t,s)=>{const c=t.toISOString().split("T")[0],m=x.filter(n=>n.date===c&&n.status!=="cancelled").length;return e.jsx("div",{className:"min-w-[100px] p-3 text-center border-r font-semibold",children:m>0?m:"â€”"},s)})]})}),e.jsxs("div",{className:"bg-gray-50 p-4 border-t",children:[e.jsx("div",{className:"text-sm font-semibold mb-3",children:"Legend:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-100 border border-yellow-300 rounded"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-red-100 border border-red-300 rounded"}),e.jsx("span",{children:"Cancelled"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:[e.jsx("strong",{children:"Events"})," are shown with colored left borders. ",e.jsx("strong",{children:"Trainer status"})," is shown in colored blocks with availability times."]})]})]})})}function T({schedules:g,events:x,currentDate:d}){const o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],r=new Date(d),p=r.getDay(),h=r.getDate()-p+(p===0?-6:1);r.setDate(h);const b=Array.from({length:7},(u,a)=>{const i=new Date(r);return i.setDate(r.getDate()+a),i}),l=(u,a)=>{const i=a.toISOString().split("T")[0];return i>=u.start_date&&i<=u.end_date};return e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-7 gap-2",children:o.map((u,a)=>{const i=b[a],y=i.toISOString().split("T")[0],f=g.filter(s=>s.date===y),t=x.filter(s=>l(s,i));return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-700",children:u}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-2",children:i.getDate()}),e.jsxs("div",{className:"mt-4 space-y-2",children:[t.map(s=>e.jsxs("div",{className:"text-xs p-2 rounded border-l-4",style:{borderLeftColor:s.color||"#3b82f6",backgroundColor:s.color?`${s.color}15`:"#eff6ff"},children:[e.jsx("div",{className:"font-semibold",children:s.name}),s.category&&e.jsx("div",{className:"text-xs text-gray-600",children:s.category})]},s.id)),f.map(s=>e.jsxs("div",{className:"bg-green-100 text-green-800 text-xs p-2 rounded",children:[e.jsx("div",{className:"font-semibold",children:s.trainer?.name}),e.jsx("div",{className:"text-xs",children:s.status}),s.availability&&s.availability.length>0&&e.jsx("div",{className:"text-xs",children:s.availability.join(", ")})]},s.id))]})]},u)})})})}function C({schedules:g,events:x,currentDate:d}){const o=new Date(d.getFullYear(),d.getMonth(),1),r=new Date(d.getFullYear(),d.getMonth()+1,0),p=o.getDay(),h=r.getDate(),b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=[];for(let a=0;a<p;a++)l.push(null);for(let a=1;a<=h;a++)l.push(a);const u=(a,i)=>i>=a.start_date&&i<=a.end_date;return e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:b.map(a=>e.jsx("div",{className:"text-center font-semibold text-gray-700 py-2",children:a},a))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:l.map((a,i)=>{if(!a)return e.jsx("div",{className:"aspect-square"},`empty-${i}`);const y=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,f=g.filter(s=>s.date===y),t=x.filter(s=>u(s,y));return e.jsxs("div",{className:"aspect-square border rounded-lg p-2 hover:shadow-md transition cursor-pointer",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:a}),e.jsxs("div",{className:"mt-1 space-y-1",children:[t.slice(0,1).map(s=>e.jsx("div",{className:"text-xs p-1 rounded border-l-2",style:{borderLeftColor:s.color||"#3b82f6",backgroundColor:s.color?`${s.color}20`:"#eff6ff"},title:s.name,children:s.name.substring(0,8)},s.id)),f.slice(0,1).map(s=>e.jsx("div",{className:"bg-green-100 text-green-800 text-xs p-1 rounded truncate",title:`${s.trainer?.name} - ${s.status}`,children:s.trainer?.name?.substring(0,8)},s.id)),t.length+f.length>2&&e.jsxs("div",{className:"text-xs text-gray-600",children:["+",t.length+f.length-2," more"]})]})]},a)})})]})}export{M as component};
