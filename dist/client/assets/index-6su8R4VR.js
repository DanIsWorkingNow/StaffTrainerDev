import{g as T,r as N,j as e,c as $,a as C}from"./main-0TgHznNF.js";const Y=C("9b4a3abb16692c7d16e5a557f306a68ae8461dd5cf627e66abd23e5becb0fc46"),_=$({method:"POST"}).handler(Y),M=["Fajr Prayer","Dhuhr Prayer","Asr Prayer","Maghrib Prayer","Isha Prayer","Friday Prayer (Jummah)","Islamic Studies","Quran Recitation","Religious Lecture","Community Prayer","Tafsir Session","Dua & Dhikr"];function V(){const{activities:d,trainers:r,stats:x}=T.useLoaderData(),[i,a]=N.useState(new Date),[t,g]=N.useState(null),[h,b]=N.useState(!1),[n,c]=N.useState("month"),[s,m]=N.useState("all"),u=(l,o,D)=>{const v=o??i.getMonth(),j=`${D??i.getFullYear()}-${String(v+1).padStart(2,"0")}-${String(l).padStart(2,"0")}`;return d.filter(f=>f.date===j)},w=()=>{const l=new Date;return u(l.getDate(),l.getMonth(),l.getFullYear())},p=()=>{const l=new Date(i),o=l.getDay(),D=l.getDate()-o+(o===0?-6:1);l.setDate(D);const v=[];for(let S=0;S<7;S++){const j=new Date(l);j.setDate(l.getDate()+S);const f=u(j.getDate(),j.getMonth(),j.getFullYear());v.push(...f.map(y=>({...y,displayDate:j})))}return v},A=()=>s==="all"?d:d.filter(l=>l.in_charge===s||l.participants.some(o=>r.find(v=>v.id===o)?.name===s)),F=l=>{const o=new Date(i.getFullYear(),i.getMonth(),l);g(o),b(!0)},P=()=>{const l=i.getFullYear(),o=i.getMonth(),D=new Date(l,o,1),S=new Date(l,o+1,0).getDate(),j=D.getDay(),f=[];for(let y=0;y<j;y++)f.push(null);for(let y=1;y<=S;y++)f.push(y);return f};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Religious Activities Schedule"}),e.jsx("p",{className:"text-gray-600",children:"Schedule spiritual guidance and community building activities"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(k,{title:"Today's Activities",value:x.todayActivities,icon:"ðŸ“–",color:"bg-teal-500"}),e.jsx(k,{title:"This Week",value:x.thisWeekActivities,icon:"ðŸ“…",color:"bg-green-500"}),e.jsx(k,{title:"Active Participants",value:x.activeParticipants,icon:"ðŸ‘¥",color:"bg-purple-500"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const l=new Date(i);l.setMonth(i.getMonth()-1),a(l)},className:"p-2 hover:bg-gray-100 rounded-lg transition",children:"â—€ Previous"}),e.jsx("h2",{className:"text-2xl font-bold",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>{const l=new Date(i);l.setMonth(i.getMonth()+1),a(l)},className:"p-2 hover:bg-gray-100 rounded-lg transition",children:"Next â–¶"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded transition ${n==="week"?"bg-teal-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded transition ${n==="month"?"bg-teal-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Month"}),e.jsx("button",{onClick:()=>c("participant-schedule"),className:`px-4 py-2 rounded transition ${n==="participant-schedule"?"bg-teal-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Participant Schedule"})]})]})}),n==="month"&&e.jsx(R,{getDaysInMonth:P,getActivitiesForDate:u,handleDateClick:F,currentDate:i}),n==="week"&&e.jsx(W,{activities:p(),currentDate:i,trainers:r}),n==="participant-schedule"&&e.jsx(I,{trainers:r,activities:A(),selectedParticipant:s,setSelectedParticipant:m,currentDate:i}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:n==="week"?"This Week's Religious Activities":n==="participant-schedule"?"Participant's Activities":"Today's Religious Activities"}),(()=>{const l=n==="week"?p():n==="participant-schedule"?A():w();return l.length===0?e.jsx("p",{className:"text-gray-600",children:"No activities scheduled"}):e.jsx("div",{className:"space-y-3",children:l.map(o=>e.jsx("div",{className:"border-l-4 border-teal-500 bg-teal-50 p-4 rounded hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:o.activity}),o.displayDate&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Date:"})," ",o.displayDate.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("strong",{children:"Leader/Imam:"})," ",o.in_charge]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Participants:"})," ",o.participants.length," participant(s)"]})]}),e.jsx("div",{className:"text-xs bg-teal-200 text-teal-800 px-3 py-1 rounded-full",children:"ðŸ•Œ Religious"})]})},o.id))})})()]}),h&&t&&e.jsx(L,{date:t,trainers:r,onClose:()=>b(!1),onSubmit:_})]})}function k({title:d,value:r,icon:x,color:i}){return e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:d}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r})]}),e.jsx("div",{className:`${i} text-white p-4 rounded-lg text-2xl`,children:x})]})})}function R({getDaysInMonth:d,getActivitiesForDate:r,handleDateClick:x,currentDate:i}){return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((a,t)=>e.jsxs("div",{className:`text-center font-semibold py-2 ${t===5?"text-green-700":"text-gray-700"}`,children:[a,t===5&&e.jsx("span",{className:"ml-1",children:"ðŸ•Œ"})]},a))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:d().map((a,t)=>{if(!a)return e.jsx("div",{className:"aspect-square"},`empty-${t}`);const g=r(a),h=a===new Date().getDate()&&i.getMonth()===new Date().getMonth()&&i.getFullYear()===new Date().getFullYear(),n=new Date(i.getFullYear(),i.getMonth(),a).getDay()===5;return e.jsxs("div",{onClick:()=>x(a),className:`
                aspect-square border-2 rounded-lg p-2 cursor-pointer transition-all
                hover:shadow-lg hover:border-teal-500 hover:scale-105
                ${h?"border-teal-600 bg-teal-50 ring-2 ring-teal-300":n?"border-green-400 bg-green-50":"border-gray-200 bg-white"}
              `,children:[e.jsxs("div",{className:`font-semibold mb-1 flex items-center justify-between ${h?"text-teal-700":n?"text-green-700":"text-gray-900"}`,children:[e.jsx("span",{children:a}),n&&e.jsx("span",{className:"text-xs",children:"ðŸ•Œ"})]}),e.jsxs("div",{className:"space-y-1",children:[g.slice(0,2).map((c,s)=>e.jsxs("div",{className:`text-xs p-1 rounded truncate ${c.activity.includes("Prayer")||c.activity.includes("Jummah")?"bg-green-100 text-green-800":"bg-teal-100 text-teal-800"}`,title:c.activity,children:["ðŸ•Œ ",c.activity.substring(0,8),"..."]},s)),g.length>2&&e.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:["+",g.length-2," more"]})]})]},a)})}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-teal-600 bg-teal-50 rounded"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-green-400 bg-green-50 rounded"}),e.jsx("span",{children:"Friday (Jummah) ðŸ•Œ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{children:"Prayer Activity"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-teal-100 border border-teal-300 rounded"}),e.jsx("span",{children:"Other Activity"})]})]})})]})}function W({activities:d,currentDate:r,trainers:x}){const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a=new Date(r),t=a.getDay(),g=a.getDate()-t+(t===0?-6:1);a.setDate(g);const h=Array.from({length:7},(b,n)=>{const c=new Date(a);return c.setDate(a.getDate()+n),c});return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsx("div",{className:"grid grid-cols-7 gap-2",children:i.map((b,n)=>{const c=h[n],s=c.toISOString().split("T")[0],m=d.filter(p=>p.date===s),u=c.toDateString()===new Date().toDateString(),w=c.getDay()===5;return e.jsxs("div",{className:`text-center p-3 rounded-lg ${u?"bg-teal-50 ring-2 ring-teal-300":w?"bg-green-50":""}`,children:[e.jsxs("div",{className:`font-semibold ${u?"text-teal-600":w?"text-green-600":"text-gray-700"}`,children:[b,w&&e.jsx("span",{className:"ml-1",children:"ðŸ•Œ"})]}),e.jsx("div",{className:`text-2xl font-bold mt-2 ${u?"text-teal-600":w?"text-green-600":"text-gray-900"}`,children:c.getDate()}),e.jsxs("div",{className:"mt-4 space-y-2",children:[m.map(p=>e.jsxs("div",{className:`text-xs p-2 rounded border-l-4 ${p.activity.includes("Prayer")||p.activity.includes("Jummah")?"bg-green-100 text-green-800 border-green-500":"bg-teal-100 text-teal-800 border-teal-500"}`,children:[e.jsx("div",{className:"font-semibold truncate",children:p.activity}),e.jsxs("div",{className:"text-xs mt-1",children:["ðŸ‘¤ ",p.in_charge]})]},p.id)),m.length===0&&e.jsx("div",{className:"text-xs text-gray-400 italic",children:"No activities"})]})]},b)})})})}function I({trainers:d,activities:r,selectedParticipant:x,setSelectedParticipant:i,currentDate:a}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Participant"}),e.jsxs("select",{value:x,onChange:t=>i(t.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"all",children:"All Participants"}),d.map(t=>e.jsxs("option",{value:t.name,children:[t.rank," ",t.name]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.filter(t=>{const g=new Date(t.date);return g.getMonth()===a.getMonth()&&g.getFullYear()===a.getFullYear()}).length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"As Leader/Imam"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.filter(t=>t.in_charge===x).length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Participants"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(t=>{const g=r.filter(h=>h.in_charge===t.name||h.participants.includes(t.id));return e.jsx("div",{className:`p-4 rounded-lg border-2 transition cursor-pointer ${x===t.name?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-teal-300"}`,onClick:()=>i(t.name),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-teal-100 text-teal-800 w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.rank}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[g.length," activity(s)"]})]})]})},t.id)})})]})]})}function L({date:d,trainers:r,onClose:x,onSubmit:i}){const[a,t]=N.useState({activity:M[0],in_charge:r[0]?.name||"",participants:[]}),[g,h]=N.useState(!1),b=async s=>{s.preventDefault(),h(!0);const m=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;(await i({data:{date:m,...a}})).success&&window.location.reload(),h(!1)},n=s=>{t(m=>({...m,participants:m.participants.includes(s)?m.participants.filter(u=>u!==s):[...m.participants,s]}))},c=d.getDay()===5;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:x}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50 pointer-events-none",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto pointer-events-auto",children:[e.jsxs("div",{className:`border-b px-6 py-4 flex justify-between items-center sticky top-0 ${c?"bg-green-50":"bg-teal-50"}`,children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Schedule Religious Activity",c&&e.jsx("span",{className:"ml-2 text-green-600",children:"ðŸ•Œ Friday"})]}),e.jsx("button",{onClick:x,className:"text-gray-600 hover:text-gray-900 text-2xl leading-none",type:"button",children:"Ã—"})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"text",value:d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),readOnly:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Activity Type *"}),e.jsx("select",{required:!0,value:a.activity,onChange:s=>t({...a,activity:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500",children:M.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Leader/Imam *"}),e.jsx("select",{required:!0,value:a.in_charge,onChange:s=>t({...a,in_charge:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500",children:r.map(s=>e.jsxs("option",{value:s.name,children:[s.rank," ",s.name]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Participants *"}),e.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:r.map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.participants.includes(s.id),onChange:()=>n(s.id),className:"w-4 h-4 text-teal-600 rounded focus:ring-2 focus:ring-teal-500"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:s.rank})," ",s.name]})]},s.id))}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",a.participants.length," participant(s)"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||a.participants.length===0,className:"px-6 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Scheduling...":"Schedule Activity"})]})]})]})})]})}export{V as component};
