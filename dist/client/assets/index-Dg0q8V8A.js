import{e as Y,r as g,j as e,c as $,a as L}from"./main-0TgHznNF.js";const I=L("9bcf9e241e61f6cff0285b7b4794c4d83cb3a2a6260c741b991abb83f0966b40"),O=$({method:"GET"}).handler(I);function U(){const m=Y.useLoaderData(),[p]=g.useState(m.trainers),[c,y]=g.useState(null),[r,T]=g.useState(new Date),[h,f]=g.useState(null),[N,C]=g.useState(m.religiousActivities),[w,F]=g.useState(m.physicalTraining),[D,P]=g.useState(m.events),[_,k]=g.useState(m.schedules),S=async(t,s,l)=>{const a=await O({data:{trainerId:t||void 0,month:s,year:l}});C(a.religiousActivities),F(a.physicalTraining),P(a.events),k(a.schedules)},A=async t=>{const s=t?parseInt(t):null;y(s),f(null),s&&await S(s,r.getMonth(),r.getFullYear())},M=async t=>{const s=new Date(r);t==="prev"?s.setMonth(r.getMonth()-1):s.setMonth(r.getMonth()+1),T(s),f(null),c&&await S(c,s.getMonth(),s.getFullYear())},o=p.find(t=>t.id===c),R=()=>{if(!c)return{religious:0,events:0,physical:0,leadership:0};const t=N.filter(n=>n.in_charge===o?.name||n.participants.includes(c)).length,s=D.filter(n=>{const x=new Date(n.start_date),d=new Date(n.end_date);return _.some(i=>{const v=new Date(i.date);return v>=x&&v<=d})}).length,l=w.filter(n=>n.in_charge===o?.name||n.participants.includes(c)).length,a=N.filter(n=>n.in_charge===o?.name).length+w.filter(n=>n.in_charge===o?.name).length;return{religious:t,events:s,physical:l,leadership:a}},u=t=>{if(!c)return[];const s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`,l=[];return N.forEach(a=>{a.date===s&&(a.in_charge===o?.name?l.push({type:"Religious Activity",time:"Morning",activity:a.activity,role:"Leader/Imam",color:"#22c55e"}):a.participants.includes(c)&&l.push({type:"Religious Activity",time:"Morning",activity:a.activity,role:"Participant",color:"#86efac"}))}),D.forEach(a=>{const n=new Date(a.start_date),x=new Date(a.end_date),d=new Date(s);d>=n&&d<=x&&l.push({type:"Event",time:"Full Day",activity:a.name,role:"Participant",color:a.color||"#3b82f6"})}),w.forEach(a=>{a.date===s&&(a.in_charge===o?.name?l.push({type:"Physical Training",time:a.time_slot||"5:00 PM - 7:00 PM",activity:a.training_type,role:"In Charge",color:"#f97316"}):a.participants.includes(c)&&l.push({type:"Physical Training",time:a.time_slot||"5:00 PM - 7:00 PM",activity:a.training_type,role:"Participant",color:"#fdba74"}))}),l},E=()=>{const t=r.getFullYear(),s=r.getMonth(),l=new Date(t,s,1),n=new Date(t,s+1,0).getDate(),x=l.getDay(),d=[];for(let i=0;i<x;i++)d.push(null);for(let i=1;i<=n;i++)d.push(i);return d},b=R();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trainer Activity Overview"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive Trainer Schedule Monitoring"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Trainer"}),e.jsxs("select",{value:c||"",onChange:t=>A(t.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a Trainer"}),p.map(t=>e.jsxs("option",{value:t.id,children:[t.rank," ",t.name]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Month & Year"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M("prev"),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 transition",children:"â—€"}),e.jsx("div",{className:"flex-1 text-center font-semibold text-lg",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>M("next"),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 transition",children:"â–¶"})]})]})]})}),c&&o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:["Monthly Summary for ",o.rank," ",o.name]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(j,{title:"Religious Activities",value:b.religious,icon:"ðŸ•Œ",color:"bg-teal-500"}),e.jsx(j,{title:"Event Details",value:b.events,icon:"ðŸ“…",color:"bg-blue-500"}),e.jsx(j,{title:"Physical Training",value:b.physical,icon:"ðŸ’ª",color:"bg-orange-500"}),e.jsx(j,{title:"Leadership Roles",value:b.leadership,icon:"â­",color:"bg-yellow-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Calendar"}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((t,s)=>e.jsxs("div",{className:`text-center font-semibold py-2 ${s===5?"text-teal-700":"text-gray-700"}`,children:[t,s===5&&e.jsx("span",{className:"ml-1",children:"ðŸ•Œ"})]},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:E().map((t,s)=>{if(!t)return e.jsx("div",{className:"aspect-square"},`empty-${s}`);const l=u(t),a=t===new Date().getDate()&&r.getMonth()===new Date().getMonth()&&r.getFullYear()===new Date().getFullYear(),x=new Date(r.getFullYear(),r.getMonth(),t).getDay()===5,d=h?.getDate()===t&&h?.getMonth()===r.getMonth()&&h?.getFullYear()===r.getFullYear();return e.jsxs("div",{onClick:()=>{const i=new Date(r.getFullYear(),r.getMonth(),t);f(i)},className:`
                      aspect-square border-2 rounded-lg p-2 cursor-pointer transition-all
                      hover:shadow-lg hover:scale-105
                      ${a?"border-blue-600 bg-blue-50 ring-2 ring-blue-300":x?"border-teal-400 bg-teal-50":d?"border-purple-600 bg-purple-50":"border-gray-200 bg-white"}
                    `,children:[e.jsx("div",{className:`font-semibold mb-1 text-sm ${a?"text-blue-700":x?"text-teal-700":d?"text-purple-700":"text-gray-900"}`,children:t}),e.jsxs("div",{className:"space-y-1",children:[l.slice(0,2).map((i,v)=>e.jsx("div",{className:"text-xs px-1 py-0.5 rounded truncate",style:{backgroundColor:i.color+"20",color:i.color},title:`${i.activity} (${i.role})`,children:i.type==="Religious Activity"?"ðŸ•Œ":i.type==="Physical Training"?"ðŸ’ª":"ðŸ“…"},v)),l.length>2&&e.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:["+",l.length-2]})]})]},t)})}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 bg-blue-50 rounded"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-purple-600 bg-purple-50 rounded"}),e.jsx("span",{children:"Selected"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-teal-400 bg-teal-50 rounded"}),e.jsx("span",{children:"Friday ðŸ•Œ"})]})]})})]}),h&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Daily Schedule for ",o.rank," ",o.name," - "," ",h.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(()=>{const t=u(h.getDate());return t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No activities scheduled for this day"}),e.jsx("p",{className:"text-sm mt-2",children:"This trainer is free on this date"})]}):e.jsx("div",{className:"space-y-3",children:t.map((s,l)=>e.jsx("div",{className:"border-l-4 p-4 rounded-r-lg",style:{borderLeftColor:s.color,backgroundColor:s.color+"10"},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:s.type==="Religious Activity"?"ðŸ•Œ":s.type==="Physical Training"?"ðŸ’ª":"ðŸ“…"}),e.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:s.activity})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",s.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",s.role]})]})]}),e.jsx("div",{className:"text-xs px-3 py-1 rounded-full text-white font-semibold",style:{backgroundColor:s.color},children:s.role})]})},l))})})(),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u(h.getDate()).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u(h.getDate()).filter(t=>t.role.includes("In Charge")||t.role.includes("Leader")).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Leadership Roles"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u(h.getDate()).filter(t=>t.role==="Participant").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Participations"})]})]})})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘¥"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Select a Trainer"}),e.jsx("p",{className:"text-gray-600",children:"Choose a trainer from the dropdown above to view their activity overview and schedule"})]})]})}function j({title:m,value:p,icon:c,color:y}){return e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:m}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p})]}),e.jsx("div",{className:`${y} text-white p-3 rounded-lg text-2xl`,children:c})]})})}export{U as component};
